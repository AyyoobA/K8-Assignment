apiVersion: apps/v1
kind: Deployment
metadata: 
  name: redis
spec: 
  replicas: 1
  selector: 
    matchLabels:
      app: redis
  template: 
    metadata: 
      app: redis
    spec: 
      containers:
        - name: redis
          image: redis:latest
          restart: always
          ports: 
            - containerPort: 6379
---
apiVersion: v1
kind: Service
metadata: 
  name: redis-service
spec: 
  selector: 
    app: redis
  ports:
    protocol: TCP
    port: 3000
    targetPort: 6379
    nodePort: 300004
  type: NodePort